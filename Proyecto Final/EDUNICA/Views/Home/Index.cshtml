@using EDUNICA.Controllers
@model List<DatosInfo>

@{
    ViewBag.Title = "EDUNICA";
}

<main>
    <section class='hero' id='hero'>
        <div class="hero-content" id="uwu">
            <h1 id="h1haha">Plataforma de Educación Virtual Nicaragüense</h1>
            <p>
                ¡Únete a la revolución de la educación en línea! Nuestra Plataforma de Educación Virtual Nicaragüense te ofrece una amplia gama de cursos y programas para ayudarte a alcanzar tus metas académicas y profesionales. ¡Haz clic aquí para comenzar tu viaje de aprendizaje hoy mismo! 🎓🚀
            </p>
            <button class="btnn" onclick="url()">
                <div class="wrapper">
                    <p class="text">Ver Cursos </p>

                    <div class="flower flower1">
                        <div class="petal one"></div>
                        <div class="petal two"></div>
                        <div class="petal three"></div>
                        <div class="petal four"></div>
                    </div>
                    <div class="flower flower2">
                        <div class="petal one"></div>
                        <div class="petal two"></div>
                        <div class="petal three"></div>
                        <div class="petal four"></div>
                    </div>
                    <div class="flower flower3">
                        <div class="petal one"></div>
                        <div class="petal two"></div>
                        <div class="petal three"></div>
                        <div class="petal four"></div>
                    </div>
                    <div class="flower flower4">
                        <div class="petal one"></div>
                        <div class="petal two"></div>
                        <div class="petal three"></div>
                        <div class="petal four"></div>
                    </div>
                    <div class="flower flower5">
                        <div class="petal one"></div>
                        <div class="petal two"></div>
                        <div class="petal three"></div>
                        <div class="petal four"></div>
                    </div>
                    <div class="flower flower6">
                        <div class="petal one"></div>
                        <div class="petal two"></div>
                        <div class="petal three"></div>
                        <div class="petal four"></div>
                    </div>
                </div>
            </button>
        </div>
    </section>
    <section class="uwu" id="aboutme" style="display:flex; justify-content:center; text-align:center; padding:70px;">
        <ul style="list-style:none; display:flex; gap:30px; justify-content:center; letter-spacing:0.2em; ">
            @foreach (var item in Model)
            {
                <li><h3>Cursos</h3> <br /> <h3><span class="contador" data-valor="@item.Cantidad">0</span></h3></li>
                <li><h3>Colaboraciones</h3> <br /> <h3><span class="contador" data-valor="@item.CantidadColaboraciones">0</span></h3></li>
                <li><h3>Recaudado</h3> <br /> <h3><span class="contador" data-valor="@item.Presupuesto">0</span></h3></li>
            }
        </ul>
    </section>
    <section class="uwu" id='aboutme' style="display:flex;">
        <div id="caja" style="padding:50px;">
            <h2 id="h1haha" style="text-align:center;">¿Cuál es Nuestro Objetivo?</h2>
            <div style="display:grid; grid-template-columns:300px 1fr; place-items:center;">
                <img src="~/Content/Img/Portada2.jpg" alt="Alternate Text" style="width:220px; border-radius:50%;" />
                <p>
                    Nuestro objetivo principal es democratizar el acceso a la educación de calidad en Nicaragua, proporcionando una plataforma de aprendizaje en línea que sea accesible para todos, independientemente de su ubicación geográfica o situación económica. Buscamos empoderar a los estudiantes y profesionales nicaragüenses al proporcionarles las herramientas y recursos necesarios para alcanzar sus metas académicas y profesionales.
                </p>
            </div>

        </div>
    </section>
</main>

<style>

    /* Estilo básico del contador */
    .contador {
        font-size: 3rem;
        font-weight: bold;
        color: white;
    }
</style>
<script>
    function url() {
        window.location.href = "/Cursoes";
    }

    var xd = document.getElementById('h1haha');
    var caja = document.getElementById("caja");

    // Función que se ejecuta cuando se desplaza hacia abajo
    function activarClase() {
        // Verificar si la clase ya está presente
        if (!caja.classList.contains('deslizar-abajo')) {
            // Si no está presente, agregarla
            caja.classList.add('deslizar-abajo');
            //caja.classList.remove('deslizar-abajo');

            // Escuchar el evento 'animationend' para quitar la clase después de la animación
            caja.addEventListener('animationend', function () {
                caja.classList.remove('deslizar-abajo');
            }, { once: true }); // { once: true } para que se ejecute solo una vez
        }
    }
    function activarClase2() {
        // Verificar si la clase ya está presente
        if (!xd.classList.contains('tracking-in-contract')) {
            // Si no está presente, agregarla
            xd.classList.add('tracking-in-contract');

            // Escuchar el evento 'animationend' para quitar la clase después de la animación
            xd.addEventListener('animationend', function () {
                xd.classList.remove('tracking-in-contract');
            }, { once: true }); // { once: true } para que se ejecute solo una vez
        }
    }

    function activarClase3() {
        contadores.forEach(function (contador) {
            // Verificar si la clase ya está presente
            if (!contador.classList.contains('contador')) {
                // Si no está presente, agregarla
                contador.classList.add('contador');

                // Escuchar el evento 'animationend' para quitar la clase después de la animación
                contador.addEventListener('animationend', function () {
                    contador.classList.remove('contador');
                }, { once: true }); // { once: true } para que se ejecute solo una vez
            }
            
        });
    }
    // Agregar un event listener al evento de scroll
    window.addEventListener('scroll', function () {
        // Obtener la posición actual de desplazamiento
        var scrollPosition = window.scrollY;

        // Puedes ajustar el umbral según tus necesidades
        var umbral = 150;

        // Verificar si la posición de desplazamiento supera el umbral
        if (scrollPosition > umbral) {
            activarClase();
            activarClase2();
            activarClase3(); 
        }
    });

    // Función para actualizar el contador gradualmente
    function actualizarContadorGradual(elemento, valorFinal, tiempoTotal, pasos) {
        var valorInicial = 0;
        var paso = (valorFinal - valorInicial) / pasos;
        var tiempoPorPaso = tiempoTotal / pasos;

        // Función que realiza un paso del contador
        function realizarPaso() {
            valorInicial += paso;
            elemento.textContent = Math.round(valorInicial); // Redondear el valor para evitar decimales innecesarios

            if (valorInicial <= valorFinal) {
                // Continuar realizando pasos hasta alcanzar el valorFinal
                setTimeout(realizarPaso, tiempoPorPaso);
            }
        }

        // Iniciar la animación
        setTimeout(realizarPaso, tiempoPorPaso);
    }

    // Obtener todos los elementos con la clase "contador" y actualizarlos gradualmente
    var contadores = document.querySelectorAll('.contador');
    contadores.forEach(function (contador) {
        var valorFinal = parseInt(contador.getAttribute('data-valor'), 10);
        actualizarContadorGradual(contador, valorFinal, 3000, 60); // Ajustar según tus necesidades
    });
</script>

